<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ† ê°•ì˜ í‰ê°€ íˆ¬í‘œì†Œ ğŸ†</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* ğŸ¨ ë°°ê²½ */
        body {
            background: linear-gradient(135deg, #141e30, #243b55);
            margin: 0; padding: 20px 10px;
            color: #fff;
            font-family: 'Noto Sans KR', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .snowflake { position: fixed; top: -10px; color: rgba(255, 255, 255, 0.3); font-size: 1em; z-index: 0; pointer-events: none; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(110vh); } }

        .container { max-width: 600px; margin: 0 auto; text-align: center; position: relative; z-index: 10; padding-bottom: 60px; }

        h1 { font-size: 1.8rem; color: #FFD700; margin: 20px 0 5px 0; font-weight: 700; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .subtitle { color: #ccc; font-size: 0.9rem; margin-bottom: 20px; font-weight: 300; }

        /* ğŸ“‚ ê°€ë‚˜ë‹¤ìˆœ ì¹´í…Œê³ ë¦¬ íƒ­ (ê°€ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥) */
        .category-scroll-wrapper {
            overflow-x: auto;
            white-space: nowrap;
            padding-bottom: 10px;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch; /* ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ */
            scrollbar-width: none; /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ (íŒŒì´ì–´í­ìŠ¤) */
        }
        .category-scroll-wrapper::-webkit-scrollbar { display: none; } /* ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€ (í¬ë¡¬) */

        .category-nav {
            display: inline-flex;
            gap: 8px;
            padding: 0 5px;
        }

        .cat-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ccc;
            padding: 8px 14px;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            flex-shrink: 0; /* ë²„íŠ¼ ì¤„ì–´ë“¦ ë°©ì§€ */
        }

        .cat-btn.active {
            background: #FFD700;
            color: #1a1a1a;
            font-weight: bold;
            border-color: #FFD700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.4);
        }

        /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        .review-list { display: flex; flex-direction: column; gap: 20px; min-height: 300px; }

        /* ì¹´ë“œ ë””ìì¸ */
        .review-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            padding: 20px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.2s;
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .review-card.voted { border: 1px solid #2ecc71; background: rgba(46, 204, 113, 0.1); }

        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
        .subject-info { flex: 1; }
        .subject-tag { 
            font-size: 0.75rem; color: #aaa; background: rgba(0,0,0,0.3);
            padding: 3px 6px; border-radius: 6px; margin-right: 5px; vertical-align: middle; font-weight: bold;
        }
        .subject-name { font-size: 1.15rem; font-weight: 700; color: #fff; line-height: 1.3; vertical-align: middle;}
        .prof-name { font-size: 0.85rem; color: #aaa; margin-top: 4px; font-weight: 300; }
        
        .badge { font-size: 0.75rem; background: #2ecc71; color: #fff; padding: 4px 8px; border-radius: 12px; font-weight: bold; display: none; }
        .voted .badge { display: inline-block; }

        /* ë³„ì  */
        .star-rating {
            display: flex; flex-direction: row-reverse; justify-content: center; gap: 8px;
            margin: 15px 0; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 50px;
        }
        .star-rating input { display: none; }
        .star-rating label { font-size: 2rem; color: #555; cursor: pointer; transition: color 0.2s; }
        .star-rating input:checked ~ label, .star-rating label:hover, .star-rating label:hover ~ label { color: #FFD700; text-shadow: 0 0 10px #FFD700; }

        .comment-input {
            width: 100%; padding: 12px; font-size: 1rem; border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.1);
            color: white; margin-bottom: 12px; box-sizing: border-box; outline: none;
        }
        .comment-input::placeholder { color: #bbb; font-size: 0.9rem; }

        .submit-btn {
            width: 100%; padding: 14px; font-size: 1rem; border: none; border-radius: 12px;
            background: linear-gradient(90deg, #FFD700, #ffb347); color: #1a1a1a; font-weight: 800;
            cursor: pointer; box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3); transition: active 0.1s;
        }
        .submit-btn:active { transform: scale(0.98); }
        .voted .submit-btn { background: #444; color: #aaa; box-shadow: none; }

        .footer-msg { margin-top: 40px; font-size: 0.8rem; color: #888; line-height: 1.6; padding: 20px; border-top: 1px dashed rgba(255,255,255,0.1); }
        .confetti { position: absolute; width: 6px; height: 6px; z-index: 99; pointer-events: none; border-radius: 50%; }
        
        /* ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ */
        .no-result { color: #888; margin-top: 50px; font-size: 0.9rem; }
    </style>
</head>
<body>

    <div id="snow-container"></div>

    <div class="container">
        <h1>ê°•ì˜ í‰ê°€ íˆ¬í‘œì†Œ ğŸ—³ï¸</h1>
        <p class="subtitle">ì²« ê¸€ìë¥¼ ëˆŒëŸ¬ ê³¼ëª©ì„ ì°¾ì•„ë³´ì„¸ìš”!</p>

        <div class="category-scroll-wrapper">
            <div class="category-nav" id="category-nav">
                <button class="cat-btn active" onclick="filterCategory('all')">ì „ì²´</button>
            </div>
        </div>

        <div class="review-list" id="review-list"></div>

        <div class="footer-msg">
            ì—¬ëŸ¬ë¶„ì˜ ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤.<br>
            ê²°ê³¼ëŠ” íŒŒí‹° í˜„ì¥ì—ì„œ ê³µê°œë©ë‹ˆë‹¤! ğŸ‰
        </div>
    </div>

    <script>
        // 1. ëˆˆì†¡ì´
        function createSnow() {
            const container = document.getElementById('snow-container');
            for(let i=0; i<30; i++){
                const snow = document.createElement('div');
                snow.className = 'snowflake';
                snow.innerHTML = 'â„';
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.animationDuration = Math.random() * 5 + 5 + 's'; 
                snow.style.opacity = Math.random() * 0.5 + 0.1;
                snow.style.fontSize = Math.random() * 8 + 4 + 'px';
                container.appendChild(snow);
            }
        }
        createSnow();

        // 2. â˜… ê³¼ëª© ë°ì´í„° (ì´ˆì„± ë¶„ë¥˜ìš©) â˜…
        // category í•„ë“œëŠ” ì´ì œ 'ã„±', 'ã„´' ë“±ìœ¼ë¡œ ìë™ ë§¤í•‘í•  ê±°ë¼ ë¹„ì›Œë‘¬ë„ ë¨
        // í•˜ì§€ë§Œ ì˜ì–´ ê³¼ëª©ì€ 'A-Z'ë¡œ ë¶„ë¥˜í•¨
        const subjects = [
            // ã„±
            { id: 'com_intro', name: 'ì»´í“¨í„°ì˜ì´í•´', prof: '1í•™ë…„' },
            { id: 'com_arch', name: 'ì»´í“¨í„°êµ¬ì¡°', prof: '3í•™ë…„' },
            { id: 'graphics', name: 'ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤', prof: '4í•™ë…„' },
            { id: 'compiler', name: 'ì»´íŒŒì¼ëŸ¬êµ¬ì„±', prof: '3í•™ë…„' },
            { id: 'cloud', name: 'í´ë¼ìš°ë“œì»´í“¨íŒ…', prof: '4í•™ë…„' },
            
            // ã„·
            { id: 'data_st', name: 'ìë£Œêµ¬ì¡°', prof: '2í•™ë…„' }, // 'ã…ˆ'
            { id: 'db', name: 'ë°ì´í„°ë² ì´ìŠ¤ì‹œìŠ¤í…œ', prof: '3í•™ë…„' },
            { id: 'logic', name: 'ë””ì§€í„¸ë…¼ë¦¬íšŒë¡œ', prof: '2í•™ë…„' },
            
            // ã…
            { id: 'multi_intro', name: 'ë©€í‹°ë¯¸ë””ì–´ê°œë¡ ', prof: '1í•™ë…„' },
            
            // ã…‚
            { id: 'bigdata', name: 'ë¹…ë°ì´í„°ì˜ì´í•´', prof: '4í•™ë…„' },

            // ã……
            { id: 'sw_eng', name: 'ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™', prof: '3í•™ë…„' },
            { id: 'simulation', name: 'ì‹œë®¬ë ˆì´ì…˜', prof: '4í•™ë…„' },
            
            // ã…‡
            { id: 'os', name: 'ìš´ì˜ì²´ì œ', prof: '3í•™ë…„' },
            { id: 'algo', name: 'ì•Œê³ ë¦¬ì¦˜', prof: '3í•™ë…„' },
            { id: 'web_prog', name: 'ì›¹í”„ë¡œê·¸ë˜ë°', prof: '2í•™ë…„' },
            { id: 'ubi_com', name: 'ìœ ë¹„ì¿¼í„°ìŠ¤ì»´í“¨íŒ…ê°œë¡ ', prof: '1í•™ë…„' },
            { id: 'discrete', name: 'ì´ì‚°ìˆ˜í•™', prof: '2í•™ë…„' },
            { id: 'ai', name: 'ì¸ê³µì§€ëŠ¥', prof: '4í•™ë…„' },
            { id: 'unix', name: 'UNIXì‹œìŠ¤í…œ', prof: '3í•™ë…„' }, // ì˜ì–´ì§€ë§Œ í•œê¸€ë°œìŒ 'ìœ 'ë¡œ ê²€ìƒ‰ ë§ì´ í•¨ -> í¸ì˜ìƒ 'ã…‡' ë˜ëŠ” 'A-Z'
            
            // ã…ˆ
            { id: 'network', name: 'ì •ë³´í†µì‹ ë§', prof: '4í•™ë…„' },
            { id: 'java', name: 'Javaí”„ë¡œê·¸ë˜ë°', prof: '2í•™ë…„' }, // 'J' -> A-Z
            
            // ã…
            { id: 'python', name: 'íŒŒì´ì¬í”„ë¡œê·¸ë˜ë°', prof: '1í•™ë…„' },
            { id: 'prog_lang', name: 'í”„ë¡œê·¸ë˜ë°ì–¸ì–´ë¡ ', prof: '2í•™ë…„' },

            // A-Z (ì˜ì–´ ì‹œì‘)
            { id: 'c_prog', name: 'Cí”„ë¡œê·¸ë˜ë°', prof: '1í•™ë…„' },
            { id: 'html_css', name: 'HTML5', prof: '3í•™ë…„' }, 
            { id: 'r_computing', name: 'Rì»´í“¨íŒ…', prof: '4í•™ë…„' }
        ];

        // 3. í•œê¸€ ì´ˆì„± ì¶”ì¶œ í•¨ìˆ˜
        function getChosung(str) {
            const chosung = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
            const code = str.charCodeAt(0) - 44032;
            
            // í•œê¸€ì´ ì•„ë‹Œ ê²½ìš° (ì˜ì–´ ë“±)
            if (code < 0 || code > 11171) {
                // ì˜ì–´ ëŒ€ì†Œë¬¸ì í™•ì¸
                if (/[a-zA-Z]/.test(str[0])) return 'A-Z';
                return 'ê¸°íƒ€';
            }
            return chosung[Math.floor(code / 588)];
        }

        // 4. ë°ì´í„°ì— ì¹´í…Œê³ ë¦¬(ì´ˆì„±) ìë™ í• ë‹¹
        subjects.forEach(sub => {
            // ì˜ì–´ ì´ë¦„(Cí”„ë¡œê·¸ë˜ë°, Java)ì€ A-Zë¡œ, í•œê¸€ì€ ì´ˆì„±ìœ¼ë¡œ
            // UNIXëŠ” 'U'ë‹ˆê¹Œ A-Zë¡œ ë¶„ë¥˜ (ì‚¬ìš©ìê°€ 'ìœ 'ë¡œ ì°¾ì„ ìˆ˜ë„ ìˆì§€ë§Œ ì¼ë‹¨ ì•ŒíŒŒë²³ìœ¼ë¡œ)
            sub.chosung = getChosung(sub.name);
        });

        // 5. ì¹´í…Œê³ ë¦¬ íƒ­ ìë™ ìƒì„±
        const navContainer = document.getElementById('category-nav');
        // ì¡´ì¬í•˜ëŠ” ì´ˆì„±ë§Œ ì¤‘ë³µ ì œê±°í•´ì„œ ê°€ì ¸ì˜¤ê¸° + ì •ë ¬
        const activeCategories = [...new Set(subjects.map(s => s.chosung))].sort();
        
        // 'A-Z'ê°€ ë§¨ ë’¤ë¡œ ê°€ë„ë¡ ì •ë ¬ ì¡°ì •
        if(activeCategories.includes('A-Z')) {
             activeCategories.push(activeCategories.splice(activeCategories.indexOf('A-Z'), 1)[0]);
        }

        activeCategories.forEach(cat => {
            const btn = document.createElement('button');
            btn.className = 'cat-btn';
            btn.innerText = cat;
            btn.onclick = () => filterCategory(cat);
            navContainer.appendChild(btn);
        });


        const listContainer = document.getElementById('review-list');
        let currentCategory = 'all';

        // 6. í•„í„°ë§ í•¨ìˆ˜
        function filterCategory(cat) {
            currentCategory = cat;
            
            // ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼
            document.querySelectorAll('.cat-btn').forEach(btn => {
                if((cat === 'all' && btn.innerText === 'ì „ì²´') || btn.innerText === cat) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            renderCards();
        }

        // 7. ë Œë”ë§ í•¨ìˆ˜
        function renderCards() {
            listContainer.innerHTML = '';
            
            const filtered = subjects.filter(sub => currentCategory === 'all' || sub.chosung === currentCategory)
                                     .sort((a, b) => a.name.localeCompare(b.name));

            if(filtered.length === 0) {
                listContainer.innerHTML = '<div class="no-result">í•´ë‹¹í•˜ëŠ” ê³¼ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            filtered.forEach(sub => {
                const myVote = JSON.parse(localStorage.getItem(`my_vote_${sub.id}`));
                const isVoted = myVote ? 'voted' : '';
                const btnText = myVote ? 'ìˆ˜ì •í•˜ê¸° âœï¸' : 'í‰ê°€ ì œì¶œ ğŸš€';
                const commentVal = myVote ? myVote.text : "";
                
                const card = document.createElement('div');
                card.className = `review-card ${isVoted}`;
                
                let starHtml = '';
                for(let i=5; i>=1; i--) {
                    const checked = (myVote && myVote.score == i) ? 'checked' : '';
                    starHtml += `
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_${i}" value="${i}" ${checked}>
                        <label for="rate_${sub.id}_${i}">â˜…</label>
                    `;
                }

                card.innerHTML = `
                    <div class="card-header">
                        <div class="subject-info">
                            <span class="subject-tag">${sub.chosung}</span>
                            <span class="subject-name">${sub.name}</span>
                            <div class="prof-name">${sub.prof}</div>
                        </div>
                        <span class="badge">ì™„ë£Œ</span>
                    </div>
                    
                    <div class="star-rating">${starHtml}</div>

                    <input type="text" class="comment-input" id="comment-${sub.id}" placeholder="í•œ ì¤„ í‰ (ì„ íƒ)" value="${commentVal}">
                    <button class="submit-btn" onclick="submitReview('${sub.id}')">${btnText}</button>
                `;
                listContainer.appendChild(card);
            });
        }

        // 8. ì œì¶œ í•¨ìˆ˜
        function submitReview(id) {
            const radios = document.getElementsByName(`rate_${id}`);
            let score = 0;
            for (const radio of radios) { if (radio.checked) { score = parseInt(radio.value); break; } }

            if (score === 0) { alert("ë³„ì„ ëˆŒëŸ¬ ì ìˆ˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”! â­"); return; }

            const commentInput = document.getElementById(`comment-${id}`);
            const commentText = commentInput.value.trim() || "";

            const voteData = { score: score, text: commentText };
            localStorage.setItem(`my_vote_${id}`, JSON.stringify(voteData));

            if (score === 5) launchConfetti();
            renderCards();
        }

        // 9. í­ì£½
        function launchConfetti() {
            const colors = ['#FFD700', '#FF4500', '#00FF7F', '#FFFFFF'];
            for(let i=0; i<40; i++) {
                const p = document.createElement('div');
                p.className = 'confetti';
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = '50%'; 
                p.style.top = (window.scrollY + window.innerHeight / 2) + 'px';
                document.body.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 150 + 50;
                
                p.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*velocity}px, ${Math.sin(angle)*velocity}px) scale(0)`, opacity: 0 }
                ], { duration: 800, easing: 'ease-out' }).onfinish = () => p.remove();
            }
        }

        renderCards();
    </script>
</body>
</html>
