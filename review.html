<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ† 2025 ì»´ê³¼ ê°•ì˜ ì–´ì›Œì¦ˆ ğŸ†</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* â„ï¸ ë°°ê²½: ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ê²¨ìš¸ ë°¤ */
        body {
            background: radial-gradient(circle at 50% 0%, #1b2735 0%, #090a0f 100%);
            margin: 0;
            padding: 20px;
            color: white;
            font-family: 'Noto Sans KR', sans-serif;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* ëˆˆì†¡ì´ íš¨ê³¼ */
        .snowflake {
            position: fixed;
            top: -10px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 1em;
            z-index: 1;
            pointer-events: none;
            animation: fall linear infinite;
        }
        @keyframes fall { to { transform: translateY(110vh); } }

        /* ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            z-index: 10;
            padding-bottom: 50px;
        }

        h1 {
            font-size: 2.2rem;
            color: #FFD700;
            margin: 30px 0 10px 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }
        h1 span { color: #fff; font-weight: 900; }
        .subtitle { color: #aaa; font-weight: 300; margin-bottom: 40px; }

        /* ê³¼ëª© ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ */
        .review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        /* ğŸ ë¦¬ë·° ì¹´ë“œ ë””ìì¸ */
        .review-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            text-align: left;
            position: relative;
            transition: transform 0.3s, box-shadow 0.3s;
            backdrop-filter: blur(10px);
        }
        .review-card:hover {
            transform: translateY(-5px);
            border-color: #FFD700;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .subject-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .prof-name { font-size: 0.9rem; color: #888; margin-bottom: 15px; }

        /* â­ ë³„ì  ìŠ¤íƒ€ì¼ */
        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            gap: 5px;
            margin-bottom: 15px;
        }
        .star-rating input { display: none; }
        .star-rating label {
            font-size: 2rem; color: #444; cursor: pointer; transition: color 0.2s;
        }
        .star-rating label:hover,
        .star-rating label:hover ~ label,
        .star-rating input:checked ~ label {
            color: #FFD700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }

        /* ì ìˆ˜ í‘œì‹œ */
        .score-display {
            font-size: 0.9rem;
            color: #2ecc71;
            font-weight: bold;
            float: right;
            background: rgba(46, 204, 113, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* ì…ë ¥ì°½ & ë²„íŠ¼ */
        .comment-input {
            width: 100%; padding: 10px; box-sizing: border-box;
            border-radius: 10px; border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.3); color: white;
            font-family: 'Noto Sans KR', sans-serif; margin-bottom: 10px;
        }
        .submit-btn {
            width: 100%; padding: 10px; border: none; border-radius: 10px;
            background: linear-gradient(135deg, #FFD700, #B8860B);
            color: #000; font-weight: bold; cursor: pointer; transition: transform 0.1s;
        }
        .submit-btn:active { transform: scale(0.98); }

        /* ğŸ’¬ ë¦¬ë·° ëª©ë¡ ì˜ì—­ (ìˆ¨ê¹€/ë³´ì„) */
        .review-list-area {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed rgba(255,255,255,0.2);
            display: none; /* ê¸°ë³¸ ìˆ¨ê¹€ */
        }
        .toggle-btn {
            background: transparent; border: none; color: #aaa;
            font-size: 0.9rem; cursor: pointer; width: 100%; margin-top: 10px;
            text-decoration: underline;
        }
        .toggle-btn:hover { color: #fff; }
        
        .user-comment {
            font-size: 0.9rem; background: rgba(0,0,0,0.3);
            padding: 8px; border-radius: 8px; margin-bottom: 5px;
            color: #ddd;
        }
        .user-comment span { color: #FFD700; font-weight: bold; margin-right: 5px; }

        /* ğŸ“Š ê·¸ë˜í”„ ì„¹ì…˜ */
        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            margin-top: 50px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .home-btn {
            display: inline-block; margin-top: 40px; padding: 12px 30px;
            border: 1px solid rgba(255,255,255,0.3); border-radius: 50px;
            color: #ccc; text-decoration: none; transition: all 0.3s;
        }
        .home-btn:hover { background: rgba(255,255,255,0.1); color: white; border-color: white; }

        /* í­ì£½ */
        .confetti { position: absolute; width: 8px; height: 8px; z-index: 9999; pointer-events: none; }

    </style>
</head>
<body>

    <div id="snow-container"></div>

    <div class="container">
        <h1>2025 <span>Lecture Awards</span></h1>
        <p class="subtitle">ë³„ì ê³¼ í•œì¤„í‰ì„ ë‚¨ê¸°ê³  ì‹¤ì‹œê°„ ë­í‚¹ì„ í™•ì¸í•˜ì„¸ìš”!</p>

        <div class="review-grid" id="review-list"></div>

        <div class="chart-container">
            <h2 style="color:#FFD700; margin-bottom:20px;">ğŸ“Š ì‹¤ì‹œê°„ ì¸ê¸°(?! ) ê°•ì˜ ë­í‚¹</h2>
            <canvas id="rankingChart"></canvas>
        </div>

        <a href="index.html" class="home-btn">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <script>
        // 1. ëˆˆì†¡ì´ íš¨ê³¼
        function createSnow() {
            const container = document.getElementById('snow-container');
            for(let i=0; i<40; i++){
                const snow = document.createElement('div');
                snow.className = 'snowflake';
                snow.innerHTML = 'â„';
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.animationDuration = Math.random() * 5 + 5 + 's'; 
                snow.style.opacity = Math.random() * 0.5 + 0.1;
                snow.style.fontSize = Math.random() * 10 + 5 + 'px';
                container.appendChild(snow);
            }
        }
        createSnow();

        // 2. ê°•ì˜ ë°ì´í„°
        const subjects = [
            { id: 'c_prog', name: 'C í”„ë¡œê·¸ë˜ë°', prof: 'ê¸°ì´ˆë¶€í„° íƒ„íƒ„í•˜ê²Œ' },
            { id: 'data_st', name: 'ìë£Œêµ¬ì¡°', prof: 'ìŠ¤íƒ, í, ê·¸ë¦¬ê³  íŠ¸ë¦¬' },
            { id: 'os', name: 'ìš´ì˜ì²´ì œ', prof: 'ë°ë“œë½ì´ëƒ ê¸°ì•„ìƒíƒœëƒ' },
            { id: 'network', name: 'ì»´í“¨í„° ë„¤íŠ¸ì›Œí¬', prof: 'íŒ¨í‚·ì˜ ì—¬í–‰' },
            { id: 'db', name: 'ë°ì´í„°ë² ì´ìŠ¤', prof: 'SQLì˜ ë§ˆë²•ì‚¬' },
            { id: 'algo', name: 'ì•Œê³ ë¦¬ì¦˜', prof: 'ì‹œê°„ë³µì¡ë„ì˜ ëŠª' }
        ];

        const grid = document.getElementById('review-list');
        let myChart = null; // ì°¨íŠ¸ ê°ì²´

        // 3. ì¹´ë“œ ìƒì„± ë° ì´ˆê¸°í™”
        function initCards() {
            grid.innerHTML = ''; // ì´ˆê¸°í™”
            subjects.forEach(sub => {
                // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°: { total: ì ìˆ˜í•©, count: ì¸ì›, comments: ["í‰ê°€1", "í‰ê°€2"] }
                const savedData = JSON.parse(localStorage.getItem(`review_${sub.id}`)) || { total: 0, count: 0, comments: [] };
                const avg = savedData.count === 0 ? 0 : (savedData.total / savedData.count).toFixed(1);

                // ëŒ“ê¸€ ë¦¬ìŠ¤íŠ¸ HTML ìƒì„±
                let commentsHtml = '';
                if(savedData.comments && savedData.comments.length > 0) {
                    savedData.comments.forEach(c => {
                        commentsHtml += `<div class="user-comment"><span>â­${c.score}</span> ${c.text}</div>`;
                    });
                } else {
                    commentsHtml = '<div style="color:#666; font-size:0.8rem;">ì•„ì§ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë¦¬ë·°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!</div>';
                }

                const card = document.createElement('div');
                card.className = 'review-card';
                card.innerHTML = `
                    <div class="subject-name">
                        ${sub.name}
                        <span class="score-display" id="score-${sub.id}">â­ ${avg} (${savedData.count}ëª…)</span>
                    </div>
                    <div class="prof-name">${sub.prof}</div>
                    
                    <div class="star-rating">
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_5" value="5"><label for="rate_${sub.id}_5">â˜…</label>
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_4" value="4"><label for="rate_${sub.id}_4">â˜…</label>
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_3" value="3"><label for="rate_${sub.id}_3">â˜…</label>
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_2" value="2"><label for="rate_${sub.id}_2">â˜…</label>
                        <input type="radio" name="rate_${sub.id}" id="rate_${sub.id}_1" value="1"><label for="rate_${sub.id}_1">â˜…</label>
                    </div>

                    <input type="text" class="comment-input" id="comment-${sub.id}" placeholder="í•œ ì¤„ í‰ (ì„ íƒ)">
                    <button class="submit-btn" onclick="submitReview('${sub.id}')">í‰ê°€ ì œì¶œ</button>

                    <button class="toggle-btn" onclick="toggleComments('${sub.id}')">ğŸ’¬ ë¦¬ë·° ë³´ê¸° / ë‹«ê¸°</button>
                    
                    <div class="review-list-area" id="list-${sub.id}">
                        ${commentsHtml}
                    </div>
                `;
                grid.appendChild(card);
            });
            updateChart(); // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
        }

        // 4. ë¦¬ë·° í† ê¸€ ê¸°ëŠ¥
        function toggleComments(id) {
            const area = document.getElementById(`list-${id}`);
            if (area.style.display === 'block') {
                area.style.display = 'none';
            } else {
                area.style.display = 'block';
            }
        }

        // 5. í‰ê°€ ì œì¶œ í•¨ìˆ˜
        function submitReview(id) {
            const radios = document.getElementsByName(`rate_${id}`);
            let score = 0;
            for (const radio of radios) {
                if (radio.checked) {
                    score = parseInt(radio.value);
                    break;
                }
            }

            if (score === 0) {
                alert("ë³„ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”! â­");
                return;
            }

            const commentInput = document.getElementById(`comment-${id}`);
            const commentText = commentInput.value.trim() || "ì½”ë©˜íŠ¸ ì—†ìŒ";

            // ë°ì´í„° ì €ì¥
            const savedData = JSON.parse(localStorage.getItem(`review_${id}`)) || { total: 0, count: 0, comments: [] };
            savedData.total += score;
            savedData.count += 1;
            // ì½”ë©˜íŠ¸ ë°°ì—´ ì—†ìœ¼ë©´ ìƒì„± (êµ¬ë²„ì „ í˜¸í™˜)
            if(!savedData.comments) savedData.comments = [];
            savedData.comments.push({ score: score, text: commentText }); // ì ìˆ˜ì™€ í…ìŠ¤íŠ¸ í•¨ê»˜ ì €ì¥
            
            localStorage.setItem(`review_${id}`, JSON.stringify(savedData));

            // UI ìƒˆë¡œê³ ì¹¨ (ê°„ë‹¨í•˜ê²Œ ì „ì²´ ë¦¬ë¡œë“œ ëŒ€ì‹  í•´ë‹¹ ì¹´ë“œë§Œ ê°±ì‹ í•˜ë©´ ì¢‹ì§€ë§Œ, ì½”ë“œê°€ ê¸¸ì–´ì§€ë‹ˆ ì „ì²´ ì´ˆê¸°í™”)
            initCards();
            
            // í•´ë‹¹ ë¦¬ë·°ì°½ ì—´ì–´ì£¼ê¸° (ì‚¬ìš©ì ê²½í—˜ ìœ„í•´)
            document.getElementById(`list-${id}`).style.display = 'block';

            if (score === 5) {
                launchConfetti();
                alert(`[${id}] ê³¼ëª©ì— 5ì  ë§Œì ì„ ì£¼ì…¨êµ°ìš”! ğŸ‰`);
            } else {
                alert("í‰ê°€ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤! ê·¸ë˜í”„ê°€ ê°±ì‹ ë©ë‹ˆë‹¤. ğŸ“Š");
            }
        }

        // 6. ì°¨íŠ¸ ê·¸ë¦¬ê¸° (Chart.js)
        function updateChart() {
            const ctx = document.getElementById('rankingChart').getContext('2d');
            
            // ë°ì´í„° ì¤€ë¹„
            const labels = [];
            const dataPoints = [];
            const bgColors = [];

            subjects.forEach(sub => {
                const savedData = JSON.parse(localStorage.getItem(`review_${sub.id}`)) || { total: 0, count: 0 };
                const avg = savedData.count === 0 ? 0 : (savedData.total / savedData.count).toFixed(2);
                
                labels.push(sub.name);
                dataPoints.push(avg);
                // ì ìˆ˜ì— ë”°ë¼ ìƒ‰ìƒ ë‹¤ë¥´ê²Œ (ë†’ì„ìˆ˜ë¡ ê³¨ë“œ)
                if(avg >= 4.5) bgColors.push('rgba(255, 215, 0, 0.8)'); // Gold
                else if(avg >= 3.5) bgColors.push('rgba(46, 204, 113, 0.8)'); // Green
                else bgColors.push('rgba(255, 99, 132, 0.8)'); // Red
            });

            if(myChart) myChart.destroy(); // ê¸°ì¡´ ì°¨íŠ¸ ì‚­ì œ

            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'í‰ê·  í‰ì ',
                        data: dataPoints,
                        backgroundColor: bgColors,
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderWidth: 1,
                        borderRadius: 5
                    }]
                },
                options: {
                    indexAxis: 'y', // ê°€ë¡œ ë§‰ëŒ€ ê·¸ë˜í”„ (ì´ë¦„ ì˜ ë³´ì´ê²Œ)
                    scales: {
                        x: { beginAtZero: true, max: 5, ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                        y: { ticks: { color: 'white', font: { size: 14, weight: 'bold' } }, grid: { display: false } }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: { callbacks: { label: (ctx) => `í‰ì : ${ctx.raw}ì ` } }
                    },
                    maintainAspectRatio: false,
                    responsive: true
                }
            });
            // ì°¨íŠ¸ ë†’ì´ ì¡°ì ˆ (ëª¨ë°”ì¼ ëŒ€ì‘)
            document.getElementById('rankingChart').style.height = '300px';
        }

        // 7. í­ì£½ íš¨ê³¼
        function launchConfetti() {
            const colors = ['#FFD700', '#FF4500', '#00FF7F', '#FFFFFF'];
            for(let i=0; i<50; i++) {
                const p = document.createElement('div');
                p.className = 'confetti';
                p.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                p.style.left = '50%';
                p.style.top = '50%';
                p.style.borderRadius = '50%';
                document.body.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 200 + 50;
                
                p.animate([
                    { transform: 'translate(0,0) scale(1)', opacity: 1 },
                    { transform: `translate(${Math.cos(angle)*velocity}px, ${Math.sin(angle)*velocity}px) scale(0)`, opacity: 0 }
                ], {
                    duration: 1000,
                    easing: 'ease-out'
                }).onfinish = () => p.remove();
            }
        }

        // ì‹œì‘
        initCards();

    </script>
</body>
</html>
