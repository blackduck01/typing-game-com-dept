<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ ë°©í†µëŒ€ ì»´ê³¼ íƒ€ìì™• ì„ ë°œì „ ğŸ„</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet"> 
    <style>
        /* CSS: í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í…Œë§ˆ ë””ìì¸ ë° í°íŠ¸ ì ìš© */
        body { 
            font-family: 'Noto Sans KR', sans-serif; /* ì´ŒìŠ¤ëŸ¬ì›€ íƒˆì¶œ! */
            text-align: center; 
            padding: 20px; 
            background-color: #f0f8ff; 
        }
        .container { 
            max-width: 850px; 
            margin: 20px auto; 
            background: #ffffff; 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 8px 16px rgba(0,0,0,0.2); 
            border: 5px dashed #a00000; 
            border-image: repeating-linear-gradient(45deg, #a00000, #a00000 10px, #006400 10px, #006400 20px) 5;
        }
        h1 { 
            color: #a00000; 
            font-size: 2.5em;
            text-shadow: 1px 1px 2px #006400; 
        }
        /* ì •ë³´ í…ìŠ¤íŠ¸ (ì´ˆë¡ìƒ‰) */
        p, .info-panel p { 
            color: #006400; 
            font-weight: bold;
            font-size: 1.1em;
            margin: 5px 0;
        }

        /* íƒ€ì ì œì‹œ í…ìŠ¤íŠ¸ */
        #target-text { 
            font-size: 1.3em; 
            border: 3px solid #006400; 
            padding: 25px; 
            margin-bottom: 20px; 
            text-align: left; 
            background-color: #ffeaea; 
            line-height: 1.8; 
            border-radius: 8px; 
        }
        /* ì…ë ¥ì°½ */
        #typing-input { 
            width: 90%; 
            padding: 15px; 
            font-size: 1.2em; 
            border: 3px solid #a00000; 
            border-radius: 8px; 
            margin-bottom: 20px; 
        }
        
        /* ì •í™•/ì˜¤íƒ€ ìƒ‰ìƒ */
        .correct { 
            background-color: #d4edda; 
            color: #155724; 
        }
        .incorrect { 
            background-color: #f8d7da; 
            color: #721c24; 
        }
        .highlight-current { background-color: gold; } 

        /* ìµœì¢… ê²°ê³¼ íŒ¨ë„ */
        #result { 
            margin-top: 30px; 
            padding: 15px;
            font-size: 1.5em; 
            font-weight: bold; 
            color: #a00000; 
            border: 2px solid #006400;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            background-color: #006400; 
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.1em;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 15px;
        }
        button:hover {
            background-color: #a00000; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ„ ë°©í†µëŒ€ ì»´ê³¼ íƒ€ìì™• ì„ ë°œì „ ğŸ</h1>
        <p>ì•„ë˜ ë¬¸ì¥ì„ ì •í™•í•˜ê³  ë¹ ë¥´ê²Œ ì…ë ¥í•´ë³´ì„¸ìš”! (ë‹¤ì‹œ ì‹œì‘í•˜ë©´ ë¬¸ì¥ì´ ë°”ë€ë‹ˆë‹¤)</p>

        <div id="target-text"></div>
        <textarea id="typing-input" rows="5" placeholder="ì—¬ê¸°ì— ì…ë ¥ì„ ì‹œì‘í•˜ì„¸ìš”..."></textarea>
        
        <div class="info-panel">
            <p>ê²½ê³¼ ì‹œê°„: <span id="timer">0.00</span>ì´ˆ</p>
            <p>í˜„ì¬ íƒ€ìˆ˜ (CPM): <span id="current-cpm">0</span>íƒ€</p> 
            <p>ì •í™•ë„: <span id="accuracy">100</span>%</p>
            <p>ì˜¤íƒ€ ìˆ˜: <span id="error-count">0</span>ê°œ</p> </div>
        
        <div id="result"></div>
        <button onclick="resetTest()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>

    <script>
        // JavaScript: íƒ€ì ì¸¡ì • ë¡œì§
        const targetTextElement = document.getElementById('target-text');
        const typingInput = document.getElementById('typing-input');
        const timerElement = document.getElementById('timer');
        const accuracyElement = document.getElementById('accuracy');
        const currentCpmElement = document.getElementById('current-cpm');
        const errorCountElement = document.getElementById('error-count'); // ì˜¤íƒ€ ìš”ì†Œ
        const resultElement = document.getElementById('result');

        // ëŒ€íšŒì— ì‚¬ìš©í•  ë¬¸ì¥
        const targetSentences = [
            "ë©”ë¦¬ í¬ë¦¬ìŠ¤ë§ˆìŠ¤! ë°©í†µëŒ€ ì»´ê³¼ ì—°ë§ ëª¨ì„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ë¶‰ì€ìƒ‰ê³¼ ì´ˆë¡ìƒ‰ ì¡°ëª…ì²˜ëŸ¼ ìš°ë¦¬ì˜ ì•ë‚ ë„ ë¹›ë‚˜ê¸°ë¥¼ ë°”ëë‹ˆë‹¤. íƒ€ìì™• ìƒí’ˆì€ ë”°ëœ»í•œ ì»¤í”¼ ì¿ í°ì…ë‹ˆë‹¤!",
            "ì˜¬ í•œ í•´ ì»´í“¨í„°ê³¼í•™ê³¼ì—ì„œ ì—´ì‹¬íˆ ì½”ë”©í•˜ê³  ê³µë¶€í•˜ëŠë¼ ìˆ˜ê³  ë§ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ë§›ìˆëŠ” ìŒì‹ê³¼ í•¨ê»˜ ì¦ê±°ìš´ íœ´ì‹ ì‹œê°„ì„ ê°€ì§‘ì‹œë‹¤. ì‚°íƒ€ê°€ ì½”ë“œë¥¼ ë²„ê·¸ ì—†ì´ ì£¼ê¸¸ ë°”ë¼ë©°!",
            "í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ, ë°ì´í„°ë² ì´ìŠ¤ì˜ ì¡°í™”ê°€ ì™„ë²½í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“­ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ìœµí•© ì§€ì‹ì„ ê°–ì¶˜ ìë‘ìŠ¤ëŸ¬ìš´ ë°©í†µëŒ€ ì»´ê³¼ í•™ìƒë“¤ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ ìµœê³ ì˜ ê¸°ë¡ì— ë„ì „í•˜ì„¸ìš”!"
        ];
        
        let targetText;
        let startTime;
        let timerInterval;
        let isTypingStarted = false;

        // í…ìŠ¤íŠ¸ ì´ˆê¸°í™” í•¨ìˆ˜
        function initText() {
            // ëœë¤ í…ìŠ¤íŠ¸ ì„ íƒ!
            const randomIndex = Math.floor(Math.random() * targetSentences.length);
            targetText = targetSentences[randomIndex];

            targetTextElement.innerHTML = targetText.split('').map(char => `<span>${char}</span>`).join('');
            typingInput.value = '';
            timerElement.textContent = '0.00';
            accuracyElement.textContent = '100';
            currentCpmElement.textContent = '0';
            errorCountElement.textContent = '0'; // ì˜¤íƒ€ ì´ˆê¸°í™”
            resultElement.textContent = '';
            typingInput.disabled = false;
            isTypingStarted = false;
            
            clearInterval(timerInterval);
            
            if (targetTextElement.children.length > 0) {
                 targetTextElement.children[0].classList.add('highlight-current');
            }
            typingInput.focus();
        }

        // íƒ€ì´ë¨¸ ì‹œì‘ í•¨ìˆ˜
        function startTimer() {
            startTime = new Date().getTime();
            timerInterval = setInterval(() => {
                const currentTime = new Date().getTime();
                const elapsedTime = (currentTime - startTime) / 1000;
                timerElement.textContent = elapsedTime.toFixed(2);
                updateRealtimeCpm(elapsedTime); 
            }, 100); 
        }
        
        // ì‹¤ì‹œê°„ CPM ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateRealtimeCpm(elapsedTimeInSeconds) {
             const currentInput = typingInput.value;
             
             if (elapsedTimeInSeconds > 0 && currentInput.length > 0) {
                const currentCpm = (currentInput.length / (elapsedTimeInSeconds / 60)).toFixed(0);
                currentCpmElement.textContent = currentCpm;
            } else {
                 currentCpmElement.textContent = '0';
            }
        }

        // ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
        typingInput.addEventListener('input', (e) => {
            const currentInput = e.target.value;

            // 1. íƒ€ì´ë¨¸ ì‹œì‘
            if (!isTypingStarted) {
                startTimer();
                isTypingStarted = true;
            }

            // 2. ì…ë ¥ê°’ ë¹„êµ ë° ìŠ¤íƒ€ì¼ ì ìš©
            let correctChars = 0;
            let currentErrors = 0; // ì˜¤íƒ€ ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
            const targetChars = targetTextElement.children;
            
            for (let i = 0; i < targetChars.length; i++) {
                const targetCharSpan = targetChars[i];
                
                // í˜„ì¬ ê¸€ì í•˜ì´ë¼ì´íŠ¸ ì—…ë°ì´íŠ¸
                targetCharSpan.classList.remove('highlight-current');
                if (i === currentInput.length && i < targetChars.length) {
                     targetCharSpan.classList.add('highlight-current');
                }
                
                // ì˜¤íƒ€ ì²´í¬
                if (i < currentInput.length) {
                    if (currentInput[i] === targetText[i]) {
                        targetCharSpan.className = 'correct';
                        correctChars++;
                    } else {
                        targetCharSpan.className = 'incorrect';
                        currentErrors++; // ì˜¤íƒ€ ë°œê²¬ ì‹œ ì¹´ìš´íŠ¸ ì¦ê°€
                    }
                } else {
                    targetCharSpan.className = ''; // ì•„ì§ ì…ë ¥ ì•ˆ ëœ ë¶€ë¶„
                }
            }

            // 3. ì •í™•ë„ ë° ì˜¤íƒ€ ì¹´ìš´íŠ¸ í‘œì‹œ
            const accuracy = ((correctChars / currentInput.length) * 100) || 100;
            accuracyElement.textContent = accuracy.toFixed(0);
            errorCountElement.textContent = currentErrors; // ì˜¤íƒ€ ìˆ˜ ì—…ë°ì´íŠ¸

            // 4. í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì²´í¬
            if (currentInput.length === targetText.length) {
                clearInterval(timerInterval);
                const finalTime = parseFloat(timerElement.textContent);
                const totalChars = targetText.length;
                
                const cpm = (totalChars / (finalTime / 60)).toFixed(0);

                resultElement.innerHTML = `
                    ğŸ‰ **íƒ€ìì™• ë“±ê·¹!** ğŸ‰<br>
                    ìµœì¢… íƒ€ìˆ˜ (CPM): **${cpm}íƒ€**<br>
                    ì •í™•ë„: **${accuracy.toFixed(0)}%** (${currentErrors}ê°œ ì˜¤íƒ€)
                `;
                
                typingInput.disabled = true;
            }
        });

        // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼
        function resetTest() {
            clearInterval(timerInterval);
            initText();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = initText;

    </script>
</body>
</html>