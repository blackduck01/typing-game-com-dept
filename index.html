<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°©í†µëŒ€ ì»´ê³¼ íƒ€ìì™• ì„ ë°œì „ ğŸ†</title>
    <style>
        /* CSS: ë””ìì¸ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ (ê°„ë‹¨í•˜ê²Œë§Œ ë„£ì–´ë³¼ê²Œ!) */
        body { font-family: 'Arial', sans-serif; text-align: center; padding: 20px; background-color: #f4f7f6; }
        .container { max-width: 800px; margin: 0 auto; background: #ffffff; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1 { color: #333; }
        #target-text { font-size: 1.2em; border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; text-align: left; background-color: #e8f5e9; line-height: 1.6; border-radius: 5px; }
        #typing-input { width: 90%; padding: 15px; font-size: 1.1em; border: 2px solid #007bff; border-radius: 5px; margin-bottom: 20px; }
        .correct { background-color: #d4edda; color: #155724; }
        .incorrect { background-color: #f8d7da; color: #721c24; }
        #result { margin-top: 20px; font-size: 1.3em; font-weight: bold; color: #28a745; }
        .highlight-current { background-color: yellow; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ ë°©í†µëŒ€ ì»´ê³¼ íƒ€ìì™• ì„ ë°œì „ ğŸš€</h1>
        <p>ì•„ë˜ ë¬¸ì¥ì„ ì •í™•í•˜ê³  ë¹ ë¥´ê²Œ ì…ë ¥í•´ë³´ì„¸ìš”!</p>

        <div id="target-text"></div>
        <textarea id="typing-input" rows="5" placeholder="ì—¬ê¸°ì— ì…ë ¥ì„ ì‹œì‘í•˜ì„¸ìš”..."></textarea>
        
        <p>ê²½ê³¼ ì‹œê°„: <span id="timer">0.00</span>ì´ˆ</p>
        <p>ì •í™•ë„: <span id="accuracy">100</span>%</p>
        
        <div id="result"></div>
        <button onclick="resetTest()">ë‹¤ì‹œ ì‹œì‘</button>
    </div>

    <script>
        // JavaScript: íƒ€ì ì¸¡ì • ë¡œì§
        const targetTextElement = document.getElementById('target-text');
        const typingInput = document.getElementById('typing-input');
        const timerElement = document.getElementById('timer');
        const accuracyElement = document.getElementById('accuracy');
        const resultElement = document.getElementById('result');

        // ëŒ€íšŒì— ì‚¬ìš©í•  ë¬¸ì¥ (ì—°ë§ ëª¨ì„ ë¶„ìœ„ê¸°ì— ë§ê²Œ í•˜ë‚˜ ë„£ì–´ë´¤ì–´!)
        const targetSentences = [
            "ì»´í“¨í„°ê³¼í•™ê³¼ ì—°ë§ ëª¨ì„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ë‹¤ë“¤ ì¼ ë…„ ë™ì•ˆ ê³ ìƒ ë§ì•˜ê³ , ë§›ìˆëŠ” ìŒì‹ ë¨¹ìœ¼ë©´ì„œ ì¦ê±°ìš´ ì‹œê°„ ë³´ëƒ…ì‹œë‹¤. íƒ€ì ëŒ€íšŒì—ì„œ ìš°ìŠ¹í•´ì„œ ìƒí’ˆì„ ê¼­ íƒ€ê°€ì„¸ìš”!",
            "ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°ëŠ” ê°œë°œìì—ê²Œ í•„ìˆ˜ì…ë‹ˆë‹¤. ëŠì„ì—†ëŠ” ë³µìŠµê³¼ ì‹¤ìŠµë§Œì´ ì‹¤ë ¥ í–¥ìƒì˜ ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ ë‹¤ ê°™ì´ í™”ì´íŒ…!",
            "í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œì˜ ì¡°í™”ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ì¢‹ì€ ì‚¬ìš©ì ê²½í—˜ì€ ì½”ë“œì˜ í’ˆì§ˆì—ì„œ ë‚˜ì˜µë‹ˆë‹¤. ëª¨ë‘ ì—´ê³µí•©ì‹œë‹¤."
        ];
        
        let targetText = targetSentences[0]; // ì²« ë²ˆì§¸ ë¬¸ì¥ ì„ íƒ
        let startTime;
        let timerInterval;
        let isTypingStarted = false;

        // í…ìŠ¤íŠ¸ ì´ˆê¸°í™” í•¨ìˆ˜
        function initText() {
            targetTextElement.innerHTML = targetText.split('').map(char => `<span>${char}</span>`).join('');
            typingInput.value = '';
            timerElement.textContent = '0.00';
            accuracyElement.textContent = '100';
            resultElement.textContent = '';
            typingInput.disabled = false;
            isTypingStarted = false;
            // í•­ìƒ ì²« ê¸€ìë¥¼ ë…¸ë€ìƒ‰ìœ¼ë¡œ í•˜ì´ë¼ì´íŠ¸
            targetTextElement.children[0].classList.add('highlight-current');
            typingInput.focus();
        }

        // íƒ€ì´ë¨¸ ì‹œì‘ í•¨ìˆ˜
        function startTimer() {
            startTime = new Date().getTime();
            timerInterval = setInterval(() => {
                const currentTime = new Date().getTime();
                const elapsedTime = (currentTime - startTime) / 1000;
                timerElement.textContent = elapsedTime.toFixed(2);
            }, 10); // 0.01ì´ˆ ë‹¨ìœ„ë¡œ ì—…ë°ì´íŠ¸
        }

        // ì…ë ¥ ì´ë²¤íŠ¸ ì²˜ë¦¬
        typingInput.addEventListener('input', (e) => {
            const currentInput = e.target.value;

            // 1. íƒ€ì´ë¨¸ ì‹œì‘
            if (!isTypingStarted) {
                startTimer();
                isTypingStarted = true;
            }

            // 2. ì…ë ¥ê°’ ë¹„êµ ë° ìŠ¤íƒ€ì¼ ì ìš©
            let correctChars = 0;
            const targetChars = targetTextElement.children;
            
            for (let i = 0; i < targetChars.length; i++) {
                const targetCharSpan = targetChars[i];
                
                // í˜„ì¬ ê¸€ì í•˜ì´ë¼ì´íŠ¸ ì—…ë°ì´íŠ¸
                targetCharSpan.classList.remove('highlight-current');
                if (i === currentInput.length) {
                     targetCharSpan.classList.add('highlight-current');
                }
                
                // ì˜¤íƒ€ ì²´í¬
                if (i < currentInput.length) {
                    if (currentInput[i] === targetText[i]) {
                        targetCharSpan.className = 'correct';
                        correctChars++;
                    } else {
                        targetCharSpan.className = 'incorrect';
                    }
                } else {
                    targetCharSpan.className = ''; // ì•„ì§ ì…ë ¥ ì•ˆ ëœ ë¶€ë¶„
                }
            }

            // 3. ì •í™•ë„ ê³„ì‚°
            const accuracy = ((correctChars / currentInput.length) * 100) || 100;
            accuracyElement.textContent = accuracy.toFixed(0);


            // 4. í…ŒìŠ¤íŠ¸ ì™„ë£Œ ì²´í¬
            if (currentInput.length === targetText.length) {
                clearInterval(timerInterval);
                const finalTime = parseFloat(timerElement.textContent);
                const totalChars = targetText.length;
                
                // í•œê¸€ íƒ€ìˆ˜ ê³„ì‚° (CPM: ë¶„ë‹¹ ê¸€ììˆ˜)
                const cpm = (totalChars / (finalTime / 60)).toFixed(0);

                resultElement.innerHTML = `
                    ğŸ‰ **ì™„ë£Œ!** ğŸ‰<br>
                    ì´ íƒ€ìˆ˜ (CPM): **${cpm}íƒ€**<br>
                    ì •í™•ë„: **${accuracy.toFixed(0)}%**
                `;
                
                typingInput.disabled = true; // ì…ë ¥ ì ê¸ˆ
                // TODO: ì—¬ê¸°ì— ë­í‚¹ ê¸°ë¡ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆì–´!
            }
        });

        // ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼
        function resetTest() {
            clearInterval(timerInterval);
            initText();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = initText;

    </script>
</body>
</html>